(function(t){function e(e){for(var i,c,s=e[0],r=e[1],p=e[2],l=0,u=[];l<s.length;l++)c=s[l],a[c]&&u.push(a[c][0]),a[c]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);d&&d(e);while(u.length)u.shift()();return o.push.apply(o,p||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,s=1;s<n.length;s++){var r=n[s];0!==a[r]&&(i=!1)}i&&(o.splice(e--,1),t=c(c.s=n[0]))}return t}var i={},a={app:0},o=[];function c(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=i,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)c.d(n,i,function(e){return t[e]}.bind(null,i));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/roulette/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],r=s.push.bind(s);s.push=e,s=s.slice();for(var p=0;p<s.length;p++)e(s[p]);var d=r;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"05f2":function(t,e,n){"use strict";var i=n("9f11"),a=n.n(i);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"name"},[n("header",{staticClass:"header"},[t._m(0),n("div",{staticClass:"buttons"},[n("span",{staticClass:"my",on:{click:function(e){t.popIndex=2}}}),n("span",{staticClass:"rule",on:{click:function(e){t.popIndex=1}}})])]),n("div",{staticClass:"turntable"},[n("div",{staticClass:"box"},[n("div",{staticClass:"pan",style:t.rotate?"transform:rotate("+t.rotate+"deg);transition: transform 3s cubic-bezier(0.785, 0.135, 0.15, 0.86)":""},t._l(t.prizeList,(function(e,i){return n("div",{key:i,class:["prize-list",e.imageurl?"":"noprize"],style:"transform:rotate("+(60*i+30)+"deg)"},[e.imageurl?n("img",{class:"true"===e.imageurl?"true":"false",attrs:{src:"http://webapp.cctv.com/h5/0731/dazhuanpan/img/"+e.imageurl+".png",alt:""}}):t._e()])})),0),n("div",{staticClass:"title"})]),n("div",{staticClass:"pointer",on:{click:t.begin}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.popIndex,expression:"popIndex"}],staticClass:"page-pop"},[1===t.popIndex?n("div",{staticClass:"rule-pop"},[n("span",{staticClass:"close",on:{click:function(e){t.popIndex=0}}})]):t._e(),2===t.popIndex?n("div",{staticClass:"my-pop"},[n("span",{staticClass:"title"},[t._v("个人中心")]),n("div",{staticClass:"userinfo"},[n("figure",[n("img",{attrs:{src:t.headimgurl,alt:""}})]),n("div",{staticClass:"nickname"},[t._v("阿双方交流")])]),t.awardStatus?n("div",{staticClass:"card-false"}):n("div",{staticClass:"card-true"},[n("span",{staticClass:"mini-title"},[t._v("抽奖记录")]),n("div",{staticClass:"info"},[n("span",[t._v("卡号："+t._s(t.cardNum))]),n("span",[t._v("密码："+t._s(t.cardSecret))])])]),n("span",{staticClass:"close",on:{click:function(e){t.popIndex=0}}})]):t._e(),3===t.popIndex?n("div",{class:["status-pop",t.cardNum?"status-pop-true":""]},[t.cardNum?n("div",{staticClass:"info"},[n("span",[t._v("卡号："+t._s(t.cardNum))]),n("span",[t._v("密码："+t._s(t.cardSecret))])]):t._e(),n("span",{staticClass:"close",on:{click:function(e){t.popIndex=0}}})]):t._e(),4===t.popIndex?n("div",{staticClass:"used-pop"},[t._v(t._s(t.awardStatus?"您已中奖，请到个人中心查看。":"对不起，今日抽奖次数已用尽。"))]):t._e()])])])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"logos"},[n("span",{staticClass:"logo-left"}),n("span",{staticClass:"logo-right"})])}],c=(n("4917"),n("3b2b"),n("28a5"),n("96cf"),n("3b8d")),s=n("1157"),r=n.n(s),p=n("bd86"),d=n("bc3a"),l=n.n(d),u=function(t){var e=t.url,n=t.data,i=void 0===n?{}:n,a=t.method,o=void 0===a?"GET":a,c="get"===o.toLocaleLowerCase()?"params":"data";return new Promise((function(t){l()(Object(p["a"])({method:o,url:e},c,i)).then((function(e){0===e.data.status||console.log("请求失败"),t(e.data)})).catch((function(e){console.log(e),t({})}))}))},h=u,v=!1,m=v?"/api":"http://39.107.0.176:3001",f=function(t){return h({url:"".concat(m,"/api/turntable"),data:t})},g=function(t){return h({url:"".concat(m,"/api/turntable/lottery"),data:t,method:"POST"})},w=(n("a481"),n("d225")),y=n("b0b4"),b=function(){function t(){Object(w["a"])(this,t)}return Object(y["a"])(t,[{key:"versions",value:function(){var t=navigator.userAgent;return{iphone:t.indexOf("iPhone")>-1,android:t.indexOf("Android")>-1,mobile:/AppleWebKit.*Mobile/i.test(t)||/Android/i.test(t)||/MIDP|SymbianOS|NOKIA|SAMSUNG|LG|NEC|TCL|Alcatel|BIRD|DBTEL|Dopod|PHILIPS|HAIER|LENOVO|MOT-|Nokia|SonyEricsson|SIE-|Amoi|ZTE/.test(t),isIE7:/MSIE 7.0|MSIE 8.0|MSIE/i.test(t),WinPhone:/Windows Phone/i.test(t)}}}],[{key:"checkUserAgent",value:function(){var t=navigator.userAgent;return{isIphone:t.indexOf("iPhone")>-1,isAndroid:t.indexOf("Android")>-1,isMobile:/AppleWebKit.*Mobile/i.test(t)||/Android/i.test(t)||/MIDP|SymbianOS|NOKIA|SAMSUNG|LG|NEC|TCL|Alcatel|BIRD|DBTEL|Dopod|PHILIPS|HAIER|LENOVO|MOT-|Nokia|SonyEricsson|SIE-|Amoi|ZTE/.test(t),isIE7:/MSIE 7.0|MSIE 8.0|MSIE/i.test(t),isWinPhone:/Windows Phone/i.test(t),isWeChat:/MicroMessenger/i.test(t),isQQ:/MQQBrowser/i.test(t),isCBox:/CntvCBox/i.test(t),isAndroidPad:/pad/i.test(t)||/SM-T/i.test(t)||/BAH-/i.test(t),isIpad:/ipad/i.test(t),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),isSafari:t.indexOf("Safari")>-1&&t.indexOf("Chrome")<1,isVivo:/vivo/i.test(t),isHuawei:/huawei/i.test(t),isHuaweiZhinengzhushou:"undefined"!==typeof JSAPI&&"undefined"!==typeof JSAPI.openByApp4EMUI6}}},{key:"getOsVersion",value:function(){var t=navigator.userAgent.toLowerCase(),e=t.match(/cpu iphone os (.*?) like mac os/);return e[1].replace(/_/g,".")}}]),t}(),x=function(){function t(){Object(w["a"])(this,t)}return Object(y["a"])(t,null,[{key:"getDownloadUrl",value:function(t){r.a.ajax({dataType:"jsonp",jsonp:"cb",url:"https://appms.app.cntvwb.cn/appms/api/version.do?applyName=1369294887",success:function(e){t(e.data.versionsUrl)}})}},{key:"initHtml",value:function(){var t="<style scoped>.t_zhe{position:fixed;top:0;left:0;width:100%;height:100%;z-index:9999;display:none;background-color:rgba(0,0,0,0.6)}.t_zhe div{width:11.9rem;height:8rem;margin:10.9rem auto 0;background-color:#fff;overflow:hidden;border-radius:5px}.t_zhe .p_one{color:#2394fc;text-align:center;font-size:.7rem;margin-top:1.6rem}.t_zhe .p_two{color:#959595;text-align:center;font-size:.65rem;margin-top:.6rem}.t_zhe ul{margin:1.4rem auto;width:90%;height:1.65rem;padding:0}.t_zhe ul li{width:4.875rem;height:1.65rem;list-style:none}.t_zhe ul li img{width:100%;height:100%;display:block}.t_zhe .li_one{float:left}.t_zhe .li_two{float:right}</style>",e='<div class="download"><div class="t_zhe"><div><p class="p_one">请先下载客户端</p><p class="p_two">即可使用弹幕播放器观看视频</p><ul><li class="li_one"><img src="img/iknow1.png" alt=""></li><li class="li_two"><img src="img/downke1.png" alt=""></li></ul></div></div></div>';r()("head").append(t),r()("body").append(e)}},{key:"openApp",value:function(t,e){var n=encodeURIComponent(t);b.checkUserAgent().isIphone?b.checkUserAgent().isWeChat?window.location="https://a.app.qq.com/o/simple.jsp?pkgname=cn.cntv&ios_scheme="+n:(window.location=t,setTimeout((function(){window.location="https://itunes.apple.com/cn/app/cntv-zhong-guo-wang-luo-dian/id331259725?mt=8"}),2500)):b.checkUserAgent().isWeChat?b.checkUserAgent().isIpad?window.location="https://a.app.qq.com/o/simple.jsp?pkgname=cn.cntvhd&ios_scheme="+n:b.checkUserAgent().isAndroidPad?window.location="https://a.app.qq.com/o/simple.jsp?pkgname=cn.cntvhd&android_schema="+n:window.location="https://a.app.qq.com/o/simple.jsp?pkgname=cn.cntv&android_schema="+n:b.checkUserAgent().isHuaweiZhinengzhushou?JSAPI.openByApp4EMUI6("cn.cntv",t,1,"C112192"):(window.location=t,setTimeout((function(){b.checkUserAgent().isIpad?window.location="https://itunes.apple.com/cn/app/%E5%A4%AE%E8%A7%86%E5%BD%B1%E9%9F%B3hd-%E6%B5%B7%E9%87%8F%E5%A4%AE%E8%A7%86%E5%86%85%E5%AE%B9%E9%AB%98%E6%B8%85%E7%9B%B4%E6%92%AD/id391071343?mt=8":b.checkUserAgent().isAndroidPad?window.location="https://a.app.qq.com/o/simple.jsp?pkgname=cn.cntvhd&android_schema="+n:b.checkUserAgent().isVivo?window.location="vivomarket://details?id=cn.cntv":b.checkUserAgent().isHuawei?window.location='hiapp://com.huawei.appmarket?activityName=activityUri|appdetail.activity&params={"params":[{"name":"uri","type":"String","value":"app|C112192"}]}&channelId=123412':window.location="http://app.cctv.com/special/download/ysyy/index.html"}),2500))}},{key:"datailUrl",value:function(e,n){n?t.openApp("cntvcbox://app.cntv.cn/?guid="+e+"&vsid="+n,"../download/index.html?guid=".concat(e,"&vsid=").concat(n,'&type=2"')):t.openApp("cntvcbox://app.cntv.cn/?guid="+e,"../download/index.html?guid=".concat(e,"&vsid=").concat(n,'&type=2"'))}},{key:"articleUrl",value:function(e,n){t.openApp("cntvcbox://app.cntv.cn/?vtype="+e+"&articleId="+n,"../download/index.html?vtype=31&articleId=".concat(n,"&type=1"))}},{key:"subscribeUrl",value:function(e,n){t.openApp("cntvcbox://app.cntv.cn/?vtype="+e+"&mid="+n,"../download/index.html?vtype=23&mid=".concat(n,"&type=1"))}},{key:"liveUrl",value:function(e){t.openApp("cntvcbox://app.cntv.cn/?vtype=8&channelid="+e,"../download/index.html?vtype=8&channelid=".concat(e))}},{key:"textImage",value:function(e,n){t.openApp("cntvcbox://app.cntv.cn/?vtype="+e+"&itemid="+n,"../download/index.html?vtype=".concat(e,"&itemid=").concat(n))}},{key:"backApp",value:function(){t.openApp("cntvcbox://app.cntv.cn/","../download/index.html")}},{key:"fastvideo",value:function(e,n,i){t.openApp("cntvcbox://app.cntv.cn/?guid="+e+"&vtype="+i+"&vsurl="+n,"../download/index.html?guid=".concat(e,"&vsurl=").concat(n,"&vtype=").concat(i,'"'))}},{key:"match",value:function(e){t.openApp("cntvcbox://app.cntv.cn/?matchid="+e+"&vtype=38","../download/index.html?vtype=38&matchid=".concat(e))}},{key:"zbzg",value:function(e,n){t.openApp("cntvcbox://app.cntv.cn/?vtype=9&sdurl="+e+"&stype="+n,"../download/index.html?vtype=9&sdurl=".concat(e,"&stype=").concat(n))}},{key:"JumpCCTV",value:function(t){/Android|webOS|iPhone|iPad|pad|iPod|BlackBerry/i.test(navigator.userAgent)||(window.location.href=t)}},{key:"singleDetail",value:function(e){t.openApp("cntvcbox://app.cntv.cn/?guid="+e,"../download/index.html?guid=".concat(e,'&type=2"'))}},{key:"quickList",value:function(e,n,i){t.openApp("cntvcbox://app.cntv.cn/?vtype="+e+"&vsurl="+n+"&sname="+i,"../download/index.html?vtype=".concat(e,"&vsurl=").concat(n,"&sname=").concat(i,'"'))}},{key:"timeLine",value:function(e,n,i,a){t.openApp("cntvcbox://app.cntv.cn/?vtype="+e+"&sdurl="+n+"&stype="+i+"&sname="+a,"../download/index.html?vtype=".concat(e,"&sdurl=").concat(n,"&stype=").concat(i,"&sname=").concat(a,'"'))}},{key:"liveChinaArea",value:function(e,n,i){t.openApp("cntvcbox://app.cntv.cn/?vtype=42&cname="+e+"&pname="+n+"&sname="+i+"&iurl=http://media.app.cntvwb.cn/vapi/video/gavlist.do?gid=18ZFjuQj0508&area=","../download/index.html?vtype=42&cname=".concat(e,"&pname=").concat(n,"&sname=").concat(i,'"'))}},{key:"liveChinaList",value:function(e,n){t.openApp("cntvcbox://app.cntv.cn/?vtype=45&pname="+e+"&sname="+n+"&iurl=http://api.cntv.cn/list/getCboxLiveList?serviceId=cbox&type=zhangbo","../download/index.html?vtype=42&pname=".concat(e,"&sname=").concat(n,'"'))}},{key:"timeline",value:function(){t.openApp("cntvcbox://app.cntv.cn/?vtype=49&bannerId=TDAT1513577926736682&bigimageId=TDAT1469795963349201",'../download/index.html?vtype=49&bannerId=TDAT1513577926736682&bigimageId=TDAT1469795963349201"')}},{key:"openH5",value:function(e){t.openApp("cntvcbox://app.cntv.cn/?vtype=7&iurl="+e,"../download/index.html?vtype=7&iurl=".concat(e,'"'))}},{key:"openLM",value:function(e,n){t.openApp("cntvcbox://app.cntv.cn/?vtype="+e+"&mid="+n,"../download/index.html?vtype=23&mid=".concat(n,"&type=1"))}},{key:"openScheme",value:function(t){document.createElement("iframe");if(!(b.checkUserAgent().ios&&b.checkUserAgent().isIphone&&b.getOsVersion()>="8.0"&&b.getOsVersion()<="9.0"))return location.href=t,!1;var e=r()("<a href='".concat(t,"'>打开APP</a>"));e.get(0).click()}}]),t}(),A={name:"app",data:function(){return{userInfo:{},uid:"",token:"",times:0,awardStatus:null,cardNum:"GA6541191211105001",cardSecret:"GA6541191211105001",prizeList:[{imageurl:"true"},{imageurl:"false"},{imageurl:"false"},{imageurl:"true"},{imageurl:"false"},{imageurl:"false"}],rotate:0,isAllow:!0,popIndex:0,prize:{},addressInfo:{}}},created:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:b.checkUserAgent().isWeChat?this.wxLoad():(this.uid=window.uid,this.nickname="央视影音用户",this.headimgurl="https://pic1.zhimg.com/80/v2-6afa72220d29f045c15217aa6b275808_1440w.jpg",this.uid||x.openH5("http://app.cctv.com/special/2020/0426travelvote/index.html")),this.getConfig();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{getConfig:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f({uid:this.uid});case 2:e=t.sent,0===e.status&&(this.token=e.data.token,this.times=e.data.times,this.awardStatus=e.data.awardStatus,this.cardNum=e.data.cardNum,this.cardSecret=e.data.cardSecret);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),begin:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,n,i,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.isAllow){t.next=2;break}return t.abrupt("return");case 2:if(!(this.times<=0)){t.next=6;break}return this.popIndex=4,setTimeout((function(){a.popIndex=0}),1500),t.abrupt("return");case 6:return this.isAllow=!1,t.next=9,g({uid:this.uid,token:this.token});case 9:e=t.sent,e&&0===e.status?(this.awardStatus=e.data.awardStatus,this.cardNum=e.data.cardNum,this.cardSecret=e.data.cardSecret,this.cardSecret?this.rotate=3590-Math.floor(40*Math.random()):this.rotate=3530-Math.floor(100*Math.random()),console.log(this.rotate),this.times--,n=setTimeout(Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a.popIndex=3,clearTimeout(n);case 2:case"end":return t.stop()}}),t)}))),3300)):i=setTimeout((function(){clearTimeout(i),a.isAllow=!0}),3300);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),wxLoad:function(){this.code=this.getQueryString("code"),null!==this.code?this.WxuserIn():window.location.href="https://wx.webapp.cctv.com/weixinapi/rect/user.jsp?redirect_uri=".concat(encodeURIComponent(window.location.href))},getQueryString:function(t){var e=window.location.href.split("?");if(e.length>1){var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=e[1].match(n);return null!==i?unescape(i[2]):null}return null},WxuserIn:function(){var t=this;r.a.ajax({url:"https://wx.webapp.cctv.com/weixinapi/intf/getUserInfo.jsonp?code="+this.code,type:"get",dataType:"jsonp",cache:!0,jsonp:"callback",jsonpcallback:"jsonp",success:function(e){if("200"===e.resultCode)if(e.openid)t.unionId=e.unionid,t.uid=e.openid,t.nickname=e.nickname,t.headimgurl=e.headimgurl;else{var n=window.location.href.split("html")[0]+"html";window.location.href="https://wx.webapp.cctv.com/weixinapi/rect/user.jsp?&redirect_uri="+encodeURIComponent(n)}},error:function(t){console.log(t)}})}}},k=A,I=(n("05f2"),n("2877")),_=Object(I["a"])(k,a,o,!1,null,"346039b0",null),C=_.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(C)}}).$mount("#app")},"9f11":function(t,e,n){}});